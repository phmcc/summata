---
output: github_document
---



# summata <a href="https://phmcc.github.io/summata/"><img src="man/figures/logo.png" align="right" height="139" alt="summata website" /></a>

<!-- badges: start -->
[![R-CMD-check](https://github.com/phmcc/summata/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/phmcc/summata/actions/workflows/R-CMD-check.yaml)
[![CRAN status](https://www.r-pkg.org/badges/version/summata)](https://CRAN.R-project.org/package=summata)
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end -->

> **summata** | /suːˈmɑːtə/ | *Latin, n. pl. of* summātum*, gerundive of* summāre*: that which has been summed up*
>
> Concise, publication-ready statistical summaries.

## Overview

The `summata` package provides a comprehensive framework for regression analysis. Built upon `data.table` for computational efficiency, the package implements a unified interface that guides the analyst from initial descriptive statistics through multivariable modeling to publication-ready tables and forest plots.

The package addresses a common challenge in applied statistics: the gap between fitted model objects and manuscript-ready output. Where base R returns coefficient matrices requiring substantial post-processing, `summata` produces formatted tables with effect estimates, confidence intervals, and *p*-values arranged for direct inclusion in academic publications.

<details>
<summary><strong>Fig 1.</strong> Cox proportional hazards forest plot generated by <code>coxforest()</code></summary>
<br>
<img src="man/figures/README-coxforest.png" alt="Cox regression forest plot" width="100%">
</details>

## Installation

The package may be installed from GitHub (stable) or Codeberg (development):

```r
# Stable release
devtools::install_github("phmcc/summata")

# Development version
devtools::install_git("https://codeberg.org/phmcc/summata.git")
```

## Theoretical Framework

### Design Principles

The package architecture reflects three guiding principles:

1. **Consistent syntax.** All modeling functions share a common signature: data first, followed by the variable of interest, then additional predictors. This convention facilitates both pipe-based workflows and pedagogical clarity.

2. **Transparent computation.** Functions attach their underlying model objects and raw numerical results as attributes, permitting the analyst to verify computations or extend analyses beyond the formatted output.
   
3. **Separation of concerns.** Analysis, formatting, and export constitute distinct operations, allowing each stage to be modified independently.

These principles manifest in the standard calling convention:


``` r
result <- fullfit(data, outcome, predictors, ...)

# The formatted table
print(result)

# The underlying model object
model <- attr(result, "model")

# Unformatted numerical results
raw <- attr(result, "raw_data")
```

### Supported Model Classes

The package provides unified handling for the following regression models:

| Model Class | Function | Effect Measure |
|:------------|:---------|:---------------|
| Linear regression | `stats::lm()` | β coefficient |
| Logistic regression | `stats::glm()` | Odds ratio |
| Poisson regression | `stats::glm()` | Rate ratio |
| Cox proportional hazards | `survival::coxph()` | Hazard ratio |
| Conditional logistic | `survival::clogit()` | Odds ratio |
| Linear mixed effects | `lme4::lmer()` | β coefficient |
| Generalized linear mixed effects | `lme4::glmer()` | Odds/rate ratio |
| Cox mixed effects | `coxme::coxme()` | Hazard ratio |

## Functional Reference

### Primary Analysis Functions

The core analytical functions implement standard regression workflows:

| Function | Purpose |
|:---------|:--------|
| `desctable()` | Descriptive statistics with stratification and hypothesis testing |
| `fit()` | Single regression model with formatted coefficient extraction |
| `fullfit()` | Integrated univariable screening and multivariable regression |
| `uniscreen()` | Systematic univariable analysis across multiple predictors |
| `multifit()` | Single predictor evaluated against multiple outcomes |
| `compfit()` | Nested model comparison with information criteria |

### Visualization Functions

Forest plots are generated directly from model objects or analysis results:

| Function | Application |
|:---------|:------------|
| `autoforest()` | Automatic model class detection |
| `lmforest()` | Linear model coefficients |
| `glmforest()` | Generalized linear model effects |
| `coxforest()` | Proportional hazards estimates |
| `uniforest()` | Univariable screening results |
| `multiforest()` | Multi-outcome analysis results |

### Export Functions

Tables may be rendered to multiple output formats:

| Function | Format | Dependency |
|:---------|:-------|:-----------|
| `autotable()` | Auto-detect from extension | Varies |
| `table2pdf()` | PDF | LaTeX distribution |
| `table2docx()` | Microsoft Word | officer, flextable |
| `table2pptx()` | Microsoft PowerPoint | officer, flextable |
| `table2tex()` | LaTeX source | xtable |
| `table2html()` | HTML | xtable |
| `table2rtf()` | Rich Text Format | — |

## Comparison with Related Packages

The R ecosystem includes several well-established packages for regression table generation. The following comparison identifies areas of overlap and distinction:

| Capability | summata | gtsummary | finalfit | arsenal |
|:-----------|:-------:|:---------:|:--------:|:-------:|
| Descriptive statistics | ✓ | ✓ | ✓ | ✓ |
| Univariable screening | ✓ | ✓ | ✓ | ✓ |
| Multivariable regression | ✓ | ✓ | ✓ | ✓ |
| Multivariate (multi-outcome) analysis | ✓ | — | — | — |
| Model comparison | ✓ | ✓ | ○ | — |
| Mixed-effects models | ✓ | ○ | ○ | — |
| Integrated forest plots | ✓ | ○ | ✓ | — |
| Multi-format export | ✓ | ✓ | ✓ | ✓ |

<sub>✓ Full support | ○ Partial support | — Not available</sub>

A detailed feature comparison is available in the [package documentation](https://phmcc.github.io/summata/articles/feature-comparison.html).

## Illustrative Examples

### Descriptive Statistics

The `desctable()` function generates publication-ready summary statistics with optional stratification:


``` r
desctable(
  data = clintrial,
  by = "treatment",
  variables = c("age", "sex", "stage", "ecog"),
  labels = clintrial_labels
)
```

<details>
<summary><strong>Fig 2.</strong> Descriptive statistics table</summary>
<br>
<img src="man/figures/README-desctable.png" alt="Descriptive statistics table" width="100%">
</details>

### Regression Analysis

The `fullfit()` function implements complete univariable-to-multivariable workflows:


``` r
fullfit(
  data = clintrial,
  outcome = "Surv(os_months, os_status)",
  predictors = c("age", "sex", "stage", "grade", "treatment"),
  method = "screen",
  p_threshold = 0.10,
  model_type = "coxph",
  labels = clintrial_labels
)
```

<details>
<summary><strong>Fig 3.</strong> Cox regression table with univariable screening</summary>
<br>
<img src="man/figures/README-fullfit.png" alt="Regression table" width="100%">
</details>

### Forest Plot Generation

Forest plots are constructed directly from fitted models:


``` r
# Fit Cox proportional hazards model
results <- fullfit(
  data = clintrial,
  outcome = "Surv(os_months, os_status)",
  predictors = c("age", "sex", "stage", "grade", "treatment"),
  model_type = "coxph",
  labels = clintrial_labels
)

# Generate forest plot
coxforest(
  x = results,
  title = "Multivariable Cox Regression: Overall Survival"
)
```

## Development

### Repository

- **Primary development**: [codeberg.org/phmcc/summata](https://codeberg.org/phmcc/summata)
- **GitHub mirror**: [github.com/phmcc/summata](https://github.com/phmcc/summata)

### Contributing

Bug reports and feature requests may be submitted via the [issue tracker](https://codeberg.org/phmcc/summata/issues). Contributions are welcome; please consult the contributing guidelines prior to submitting pull requests.

## Acknowledgments

The design of `summata` has been inspired by several existing packages:

- **finalfit** (Harrison) — Regression workflow concepts  
- **gtsummary** (Sjoberg et al.) — Table generation architecture  
- **arsenal** (Heinzen et al.) — Descriptive statistics methodology  
- **data.table** (Dowle & Srinivasan) — High-performance data operations

## License

GPL (≥ 3)

## Citation


``` r
citation("summata")
```

## Further Resources

- **Function documentation**: `?function_name` or the [reference index](https://phmcc.github.io/summata/reference/)
- **Tutorials**: `vignette("summata")` or [online articles](https://phmcc.github.io/summata/articles/)
- **Issue tracker**: [Codeberg Issues](https://codeberg.org/phmcc/summata/issues)

---

<sub>The `summata` package is under active development. The API may be subject to revision prior to CRAN submission.</sub>
