% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/uniforest.R
\name{uniforest}
\alias{uniforest}
\title{Create Forest Plot for Univariable Screening Results}
\usage{
uniforest(
  x,
  title = "Univariable Screening",
  effect_label = NULL,
  digits = 2,
  p_digits = 3,
  conf_level = 0.95,
  font_size = 1,
  annot_size = 3.88,
  header_size = 5.82,
  title_size = 23.28,
  plot_width = NULL,
  plot_height = NULL,
  table_width = 0.6,
  show_n = TRUE,
  show_events = NULL,
  indent_groups = FALSE,
  condense_table = FALSE,
  bold_variables = FALSE,
  center_padding = 4,
  zebra_stripes = TRUE,
  color = NULL,
  null_line = NULL,
  log_scale = NULL,
  labels = NULL,
  show_footer = TRUE,
  units = "in"
)
}
\arguments{
\item{x}{Univariable screen result object (data.table with class attributes
from \code{uniscreen()}).}

\item{title}{Character string specifying the plot title. Default is 
\code{"Univariable Screening"}. Use descriptive titles for publication.}

\item{effect_label}{Character string for the effect measure label on the 
forest plot axis. Default is \code{NULL}, which auto-detects based on 
model type (e.g., "Odds Ratio", "Hazard Ratio", "Rate Ratio", "Coefficient").}

\item{digits}{Integer specifying the number of decimal places for effect 
estimates and confidence intervals. Default is 2.}

\item{p_digits}{Integer specifying the number of decimal places for p-values.
P-values smaller than \code{10^(-p_digits)} are displayed as "< 0.001" 
(for \code{p_digits = 3}). Default is 3.}

\item{conf_level}{Numeric confidence level for confidence intervals. Must be
between 0 and 1. Default is 0.95 (95\% confidence intervals). The CI
percentage is automatically displayed in column headers (e.g., "90\% CI"
when \code{conf_level = 0.90}). Note: This parameter affects display only;
the underlying CIs come from the uniscreen result.}

\item{font_size}{Numeric multiplier controlling the base font size for all 
text elements. Default is 1.0.}

\item{annot_size}{Numeric value controlling the relative font size for data 
annotations. Default is 3.88.}

\item{header_size}{Numeric value controlling the relative font size for column 
headers. Default is 5.82.}

\item{title_size}{Numeric value controlling the relative font size for the 
main plot title. Default is 23.28.}

\item{plot_width}{Numeric value specifying the intended output width in 
specified \code{units}. Used for optimizing layout. Default is \code{NULL} 
(automatic). Recommended: 10-16 inches.}

\item{plot_height}{Numeric value specifying the intended output height in 
specified \code{units}. Default is \code{NULL} (automatic based on number 
of rows).}

\item{table_width}{Numeric value between 0 and 1 specifying the proportion of 
total plot width allocated to the data table. Default is 0.6 (60\% table, 
40\% forest plot).}

\item{show_n}{Logical. If \code{TRUE}, includes a column showing sample sizes. 
Default is \code{TRUE}.}

\item{show_events}{Logical. If \code{TRUE}, includes a column showing the 
number of events for each row. Default is \code{NULL}, which auto-detects
based on model type (TRUE for binomial/survival, FALSE for linear).}

\item{indent_groups}{Logical. If \code{TRUE}, indents factor levels
under their parent variable name, creating a hierarchical display. If 
\code{FALSE} (default), shows variable and level in separate columns.}

\item{condense_table}{Logical. If \code{TRUE}, condenses binary categorical 
variables into single rows by showing only the non-reference category. 
Automatically sets \code{indent_groups = TRUE}. Useful for tables with 
many binary variables. Default is \code{FALSE}.}

\item{bold_variables}{Logical. If \code{TRUE}, variable names are displayed
in bold. If \code{FALSE} (default), variable names are displayed in plain
text.}

\item{center_padding}{Numeric value specifying horizontal spacing between 
table and forest plot. Default is 4.}

\item{zebra_stripes}{Logical. If \code{TRUE}, applies alternating gray 
background shading to different variables for improved readability. 
Default is \code{TRUE}.}

\item{color}{Character string specifying the color for point estimates in 
the forest plot. Default is \code{NULL}, which auto-selects based on
effect type: purple (\code{"#8A61D8"}) for hazard ratios (Cox), teal 
(\code{"#3C8D9C"}) for odds ratios (logistic), blue (\code{"#3064A6"}) for 
rate/risk ratios (Poisson, Gamma, etc.), and green (\code{"#5A8F5A"}) for 
coefficients (linear models).
Use hex codes or R color names for custom colors.}

\item{null_line}{Numeric value for the reference line position. Default is 
\code{NULL}, which uses 1 for ratio measures (OR, HR, RR) and 0 for 
coefficients.}

\item{log_scale}{Logical. If \code{TRUE}, uses log scale for the x-axis.
Default is \code{NULL}, which auto-detects (TRUE for OR/HR/RR, FALSE for
coefficients).}

\item{labels}{Named character vector providing custom display labels for 
variables. Applied to predictor names in the plot.
Default is \code{NULL} (uses original variable names).}

\item{show_footer}{Logical. If \code{TRUE}, displays a footer with the
outcome variable name. Default is \code{TRUE}.}

\item{units}{Character string specifying units for plot dimensions: 
\code{"in"} (inches), \code{"cm"}, or \code{"mm"}. Default is \code{"in"}.}
}
\value{
A \code{ggplot} object containing the complete forest plot.
  
  The returned object includes an attribute \code{"recommended_dims"} 
  accessible via \code{attr(plot, "recommended_dims")}, containing:
  \describe{
    \item{width}{Numeric. Recommended plot width in specified units}
    \item{height}{Numeric. Recommended plot height in specified units}
  }
}
\description{
Generates a publication-ready forest plot from a \code{uniscreen()} output
object. The plot displays effect estimates (OR, HR, RR, or coefficients) with
confidence intervals for each predictor tested in univariable analysis against
a single outcome.
}
\details{
The forest plot displays univariable (unadjusted) associations between each
predictor and the outcome. This is useful for:
\itemize{
  \item Visualizing results of initial variable screening
  \item Identifying potential predictors for multivariable modeling
  \item Presenting crude associations alongside adjusted results
  \item Quick visual assessment of effect sizes and significance
}

The plot automatically handles:
\itemize{
  \item Different effect types (OR, HR, RR, coefficients) with appropriate
    axis scaling (log vs linear)
  \item Factor variables with multiple levels (grouped under variable name)
  \item Continuous variables (single row per predictor)
  \item Reference categories for categorical variables
}
}
\examples{
# Load example data
data(clintrial)
data(clintrial_labels)

# Example 1: Basic logistic regression screening
uni_results <- uniscreen(
    data = clintrial,
    outcome = "os_status",
    predictors = c("age", "sex", "smoking", "treatment", "stage"),
    labels = clintrial_labels,
    parallel = FALSE
)

uniforest(uni_results, title = "Univariable Associations with Mortality")

\donttest{
# Example 2: Survival analysis
library(survival)
surv_results <- uniscreen(
    data = clintrial,
    outcome = "Surv(os_months, os_status)",
    predictors = c("age", "sex", "treatment", "stage"),
    model_type = "coxph",
    labels = clintrial_labels,
    parallel = FALSE
)

uniforest(surv_results, title = "Univariable Survival Analysis")

# Example 3: Linear regression
lm_results <- uniscreen(
    data = clintrial,
    outcome = "los_days",
    predictors = c("age", "sex", "surgery", "diabetes"),
    model_type = "lm",
    labels = clintrial_labels,
    parallel = FALSE
)

uniforest(lm_results, title = "Predictors of Length of Stay")

# Example 4: Customize appearance
uniforest(
    uni_results,
    title = "Crude Associations with Mortality",
    color = "#E74C3C",
    indent_groups = TRUE,
    zebra_stripes = TRUE,
    bold_variables = TRUE
)

# Example 5: Hide footer
uniforest(uni_results, 
          title = "Predictors of Overall Survival Status",
          show_footer = FALSE)

# Example 6: Save with recommended dimensions
p <- uniforest(uni_results)
dims <- attr(p, "recommended_dims")
# ggsave("univariable_forest.pdf", p, width = dims$width, height = dims$height)
}

}
\seealso{
\code{\link{uniscreen}} for generating univariable screening results,
\code{\link{multiforest}} for multi-outcome forest plots,
\code{\link{coxforest}}, \code{\link{glmforest}}, \code{\link{lmforest}} for
single-model forest plots
}
